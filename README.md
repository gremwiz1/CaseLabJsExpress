# CaseLabJsExpress

- Этот проект представляет собой функционал бэкенда по созданию пользователей,
  возможность пополнения баланса пользователем, создание карточек товаров,
  оформление заказов по покупке товаров.

-Запустить проект локально можно через команду npm run start - бэк запустится на 4000-м порту.

## API

### Пользователи

- /api/signup - роут для регистрации пользователя - метод Post - обязательные три поля:
  email - электронная почта
  name - имя состоящее от 2 до 30-ти символов
  password - минимум 8 символов

- /api/signin - роут для входа пользователя - метод Post - обязательны два поля:
  email - электронная почта
  password - пароль
  В случае успешного входа выдается токен - который нужно будет передавать при всех остальных запросах - срок действия его 7 дней. (Рекомендуется его хранить в localStorage и при каждом новом запросе его подставлять)

- /api/users/me - роут для получения информации о пользователе - метод Get

- /api/users/me - роут для изменения имени и почты - метод Patch - два обязательных поля:
  name - имя
  email - электронная почта

- /api/users/balance - роут для пополнения баланса пользователя - метод Patch - обязательно одно поле:
  balance - число на которое увеличивается счет пользователя

### Товары

Для того чтобы редактировать карточки товаров - у пользователя поле isAdmin должно стоять true - без этого поля возможно только чтение карточек товаров.

- /api/product/:productId - метод Get - по айдишнику продукта выдается информация о товаре

- /api/allProducts - метод Get - выдается все карточки товаров

- /api/product - метод Post (данный метод доступен только админу) - создание карточки товара - обязательны следующие поля:
  description - описание товара - строка
  image - url - ссылка на изображение в интернете
  name - название - строка
  price - цена - число

- /api/product/:productId - метод Patch (данный метод доступен только админу) - изменить данные по товару - обязательные следующие поля:
  description - описание товара - строка
  image - url - ссылка на изображение в интернете
  name - название - строка
  price - цена - число
  Необязательно следующее поле:
  quantity - количество товара - число - при создании карточки товара оно ставится в значение ноль

- /api/product/:productId - метод Delete (данный метод доступен только админу) - удаление товара по айдишнику

### Заказы

- /api/order/:orderId - метод Get - по айдишнику выдает информацию по заказу

- /api/allOrders - метод Get - выдает список всех заказов (доступно только админу)

- /api/allOrdersByUser - метод Get - выдает список всех заказов сделанным пользователем

- api/order - метод Post - создание заказа - обязательны следующие поля:
  orderPerson - айдишник пользователя который заказывает
  orderPrice - итоговая сумма в корзине - число
  orderProducts - массив состоящий из следующих объектов:
  idProduct - айдишник товара
  quantity - кол-во товара - число
  Необязательное поле:
  comment - комментарий от пользователя - строка

- /api/order/:orderId - метод Patch - редактирование заказа (доступно только админу) - все следующие поля являются необязательными:
  orderPerson - айдишник пользователя который заказывает
  orderPrice - итоговая сумма в корзине - число
  comment - комментарий от пользователя - строка
  check - булево значение, отвечает за то - обрабатывал ли заказ администратор (при создании заказа ставится в false)
  orderStatus - число - отвечает за состояние заказа (при создании заказа ставится в ноль) -  
  0 — новый
  1 — Принят, готовится
  2 - У курьера
  3 - Выдан
  7 — отменён
  orderProducts - массив состоящий из следующих объектов:
  idProduct - айдишник товара
  quantity - кол-во товара - число

- /api/order/:orderId - метод Delete - удалние заказа (доступно только админу)
