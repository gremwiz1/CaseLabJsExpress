# CaseLabJsExpress

- Этот проект представляет собой функционал бэкенда по созданию пользователей,
  возможность пополнения баланса пользователем, создание карточек товаров,
  оформление заказов по покупке товаров.

-Запустить проект локально можно через команду npm run start - бэк запустится на 4000-м порту.

## API

### Пользователи

- /api/signup - роут для регистрации пользователя - метод Post - обязательные три поля:

  1. email - электронная почта
  2. name - имя состоящее от 2 до 30-ти символов
  3. password - минимум 8 символов

- /api/signin - роут для входа пользователя - метод Post - обязательны два поля:

  1. email - электронная почта
  2. password - пароль
     В случае успешного входа выдается токен - который нужно будет передавать при всех остальных запросах - срок действия его 7 дней. (Рекомендуется его хранить в localStorage и при каждом новом запросе его подставлять)

- /api/users/me - роут для получения информации о пользователе - метод Get

- /api/users/me - роут для изменения имени и почты - метод Patch - два обязательных поля:

  1. name - имя
  2. email - электронная почта

- /api/users/balance - роут для пополнения баланса пользователя - метод Patch - обязательно одно поле:
  1. balance - число на которое увеличивается счет пользователя

### Товары

Для того чтобы редактировать карточки товаров - у пользователя поле isAdmin должно стоять true - без этого поля возможно только чтение карточек товаров.

- /api/product/:productId - метод Get - по айдишнику продукта выдается информация о товаре

- /api/allProducts - метод Get - выдаются все карточки товаров

- /api/product - метод Post (данный метод доступен только админу) - создание карточки товара - обязательны следующие поля:

  1. description - описание товара - строка
  2. image - url - ссылка на изображение в интернете
  3. name - название - строка
  4. price - цена - число

- /api/product/:productId - метод Patch (данный метод доступен только админу) - изменить данные по товару - обязательные следующие поля:

  1. description - описание товара - строка
  2. image - url - ссылка на изображение в интернете
  3. name - название - строка
  4. price - цена - число
     Необязательно следующее поле:
  5. quantity - количество товара - число - при создании карточки товара оно ставится в значение ноль

- /api/product/:productId - метод Delete (данный метод доступен только админу) - удаление товара по айдишнику

### Заказы

- /api/order/:orderId - метод Get - по айдишнику выдает информацию по заказу

- /api/allOrders - метод Get - выдает список всех заказов (доступно только админу)

- /api/allOrdersByUser - метод Get - выдает список всех заказов сделанным пользователем

- api/order - метод Post - создание заказа - обязательны следующие поля:

  1. orderPrice - итоговая сумма в корзине - число
  2. orderProducts - массив состоящий из следующих объектов:

  - idProduct - айдишник товара
  - quantity - кол-во товара - число
    Необязательное поле:
    comment - комментарий от пользователя - строка

- /api/order/:orderId - метод Patch - редактирование заказа (доступно только админу) - все следующие поля являются необязательными:

  1. orderPerson - айдишник пользователя который заказывает
  2. orderPrice - итоговая сумма в корзине - число
  3. comment - комментарий от пользователя - строка
  4. check - булево значение, отвечает за то - обрабатывал ли заказ администратор (при создании заказа ставится в false)
  5. orderStatus - число - отвечает за состояние заказа (при создании заказа ставится в ноль) -

  - 0 — новый
  - 1 — Принят, готовится
  - 2 - У курьера
  - 3 - Выдан
  - 7 — отменён

  6. orderProducts - массив состоящий из следующих объектов:
  7. idProduct - айдишник товара
  8. quantity - кол-во товара - число

- /api/order/:orderId - метод Delete - удалние заказа (доступно только админу)
